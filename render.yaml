services:
  backend:
    type: web
    name: todo-list-backend
    env: docker
    docker:
      dockerfilePath: ./backend/Dockerfile  # Path to the backend Dockerfile
      buildCommand: 'docker build -t backend .'
      environment:
        - MYSQL_DB_CONNECTION=${MYSQL_DB_CONNECTION}
        - MYSQL_DB_NAME=${MYSQL_DB_NAME}
        - MYSQL_USER=${MYSQL_USER}
        - MYSQL_PASSWORD=${MYSQL_PASSWORD}
        - SITE_URL=${SITE_URL}
    healthCheckPath: /get_tasks.php
    autoDeploy: true

  frontend:
    type: web
    name: todo-list-frontend
    env: docker
    docker:
      dockerfilePath: ./frontend/Dockerfile  # Path to the frontend Dockerfile
      buildCommand: 'docker build -t frontend .'
    healthCheckPath: /
    autoDeploy: true
